
> swagger-express-middleware@1.0.0-alpha.12 test
> npm run istanbul


> swagger-express-middleware@1.0.0-alpha.12 istanbul
> c8 --reporter=html --reporter=text --reports-dir=coverage/node mocha --recursive tests/fixtures tests/specs

schema $id ignored http://json-schema.org/draft-07/schema#
schema $id ignored http://json-schema.org/draft-07/schema#
schema $id ignored http://json-schema.org/draft-07/schema#


  CORS middleware
    ✔ should set CORS headers, even if no other middleware is used
    ✔ should set CORS headers, even if the Paths object is empty
    ✔ should set CORS headers, even if the Path Items objects are empty
    ✔ should set CORS headers, even if a parsing error occurs
    ✔ should echo back CORS headers by default
    ✔ should use the CORS header defaults for the operation
    ✔ should use the CORS header defaults for the OPTIONS operation
    ✔ should merge the CORS header defaults for the operation and the OPTIONS operation
    ✔ should set Access-Control-Allow-Methods to the methods that are allowed by the Swagger API
    ✔ should set Access-Control-Allow-Credentials if Access-Control-Allow-Origin is wild-carded
    ✔ should set Vary: Origin if Access-Control-Allow-Origin is not wild-carded
    ✔ should append to existing Vary header if Access-Control-Allow-Origin is not wild-carded
    ✔ should automatically respond to CORS preflight requests
    ✔ should automatically respond to CORS preflight requests, even if they're not defined in the Swagger API

  DataStore
    FileDataStore
      ✔ should inherit from DataStore
      get method
        ✔ should be able to save and retrieve a resource
        ✔ should be able to update and retrieve a resource
        ✔ should be able to retrieve a resource by path
        ✔ should return undefined if no resource is found
        ✔ should be able to retrieve a resource using normalized collection path
        ✔ should be able to retrieve a resource using a non-normalized collection path
        ✔ should be able to retrieve a resource using normalized resource name
        ✔ should be able to retrieve a resource using a non-normalized resource name
        ✔ should be able to retrieve a case-sensitive resource
        ✔ should be able to retrieve a strict resource
        ✔ should be able to retrieve a strict, case-sensitive resource
        ✔ should return an error if data cannot be parsed
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      save method (single resource)
        ✔ should set the createdOn and modifiedOn properties when saved
        ✔ should update modifiedOn when a resource is updated (1004ms)
        ✔ should merge with the existing resource
        ✔ should merge with the existing resource array
        ✔ should overwrite an empty resource
        ✔ should overwrite a resource with an empty value
        ✔ should overwrite a simple resource with an object resource
        ✔ should overwrite an object resource with a simple resource
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      save method (multiple resources)
        ✔ should return an empty array if no resources are saved
        ✔ should save new resources
        ✔ should add new resources to an existing collection
        ✔ should merge resources with an existing collection
        ✔ should merge duplicate resources
        ✔ should save strict, case-sensitive resources
        ✔ should throw an error if not called with an array of Resources
        ✔ can be called without a callback
      delete method (single resource)
        ✔ should be aliased as "remove"
        ✔ should return undefined if no resource is deleted
        ✔ deleted items should not be returned later
        ✔ deleted items should not be returned later by collection
        ✔ should be able to delete a resource using normalized values
        ✔ should be able to delete a resource using non-normalized values
        ✔ should be able to delete a strict, case-sensitive resource
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      delete method (multiple resources)
        ✔ should return an empty array if no resources are deleted
        ✔ should return an empty array if no resources matched
        ✔ should return undefined if the only resource was not matched
        ✔ should delete multiple resources from a collection
        ✔ should only delete strict, case-sensitive resources
        ✔ should throw an error if not called with an array of Resources
        ✔ can be called without a callback
      getCollection
        ✔ should return an empty array if no resources are found
        ✔ should retrieve an array of one resource
        ✔ should retrieve an array of multiple resources
        ✔ should only return resources that are in the collection
        ✔ should only return strict, case-sensitive resources
        ✔ can be called without a callback
      deleteCollection
        ✔ should be aliased as "removeCollection"
        ✔ should return an empty array if no resources are deleted
        ✔ should return an empty array if no resources matched
        ✔ should delete a one-resource collection
        ✔ should delete a multiple-resource collection
        ✔ should only delete resources that are in the collection
        ✔ should only delete strict, case-sensitive resources
        ✔ can be called without a callback
    MemoryDataStore
      ✔ should inherit from DataStore
      get method
        ✔ should be able to save and retrieve a resource
        ✔ should be able to update and retrieve a resource
        ✔ should be able to retrieve a resource by path
        ✔ should return undefined if no resource is found
        ✔ should be able to retrieve a resource using normalized collection path
        ✔ should be able to retrieve a resource using a non-normalized collection path
        ✔ should be able to retrieve a resource using normalized resource name
        ✔ should be able to retrieve a resource using a non-normalized resource name
        ✔ should be able to retrieve a case-sensitive resource
        ✔ should be able to retrieve a strict resource
        ✔ should be able to retrieve a strict, case-sensitive resource
        ✔ should return an error if data cannot be parsed
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      save method (single resource)
        ✔ should set the createdOn and modifiedOn properties when saved
        ✔ should update modifiedOn when a resource is updated (1002ms)
        ✔ should merge with the existing resource
        ✔ should merge with the existing resource array
        ✔ should overwrite an empty resource
        ✔ should overwrite a resource with an empty value
        ✔ should overwrite a simple resource with an object resource
        ✔ should overwrite an object resource with a simple resource
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      save method (multiple resources)
        ✔ should return an empty array if no resources are saved
        ✔ should save new resources
        ✔ should add new resources to an existing collection
        ✔ should merge resources with an existing collection
        ✔ should merge duplicate resources
        ✔ should save strict, case-sensitive resources
        ✔ should throw an error if not called with an array of Resources
        ✔ can be called without a callback
      delete method (single resource)
        ✔ should be aliased as "remove"
        ✔ should return undefined if no resource is deleted
        ✔ deleted items should not be returned later
        ✔ deleted items should not be returned later by collection
        ✔ should be able to delete a resource using normalized values
        ✔ should be able to delete a resource using non-normalized values
        ✔ should be able to delete a strict, case-sensitive resource
        ✔ should throw an error if not called with a Resource object
        ✔ can be called without a callback
      delete method (multiple resources)
        ✔ should return an empty array if no resources are deleted
        ✔ should return an empty array if no resources matched
        ✔ should return undefined if the only resource was not matched
        ✔ should delete multiple resources from a collection
        ✔ should only delete strict, case-sensitive resources
        ✔ should throw an error if not called with an array of Resources
        ✔ can be called without a callback
      getCollection
        ✔ should return an empty array if no resources are found
        ✔ should retrieve an array of one resource
        ✔ should retrieve an array of multiple resources
        ✔ should only return resources that are in the collection
        ✔ should only return strict, case-sensitive resources
        ✔ can be called without a callback
      deleteCollection
        ✔ should be aliased as "removeCollection"
        ✔ should return an empty array if no resources are deleted
        ✔ should return an empty array if no resources matched
        ✔ should delete a one-resource collection
        ✔ should delete a multiple-resource collection
        ✔ should only delete resources that are in the collection
        ✔ should only delete strict, case-sensitive resources
        ✔ can be called without a callback

  FileDataStore
    ✔ can be passed a base directory
    ✔ creates a nameless file for the root collection
    ✔ does not create any subdirectories if the collection is one level deep
    ✔ creates a single subdirectory if the collection is two levels deep
    ✔ creates a multiple subdirectories for deeper collection paths
    ✔ returns an error if the file cannot be opened
    ✔ returns an error if the file cannot be saved
    ✔ returns an error if the directory cannot be created

  Resource class
    constructor
      ✔ can be called without any params
      ✔ can be called with just a path
      ✔ can be called with a non-string path
      ✔ can be called with just a single-depth collection path
      ✔ can be called with just a single-depth path, with no slash
      ✔ can be called with just a path and data
      ✔ can be called with a non-string path and data
      ✔ can be called with just a path and a Resource
      ✔ can be called with a collection path, resource name, and data
      ✔ can be called with a non-string collection path, resource name, and data
      ✔ can be called with a non-string collection path, non-string resource name, and data
      ✔ can be called with a collection path, resource name, and a Resource
      ✔ should throw an error if the resource name contains slashes
    merge
      ✔ merges data with the resource's existing data
      ✔ merges a Resource with the resource's existing data
      ✔ does not merge objects and arrays
      ✔ does not merge strings and arrays
      ✔ replaces the resource's existing data with a number
      ✔ replaces the resource's existing data with a date
      ✔ replaces the resource's existing data with undefined
      ✔ replaces the resource's existing data with null
      ✔ replaces undefined resource data with a value
      ✔ replaces null resource data with a value
      ✔ updates the modifiedOn date
    toString & valueOf (shared logic)
      toString
        ✔ should return the a single slash ()
        ✔ should return the a single slash ("")
        ✔ should return the a single slash ("", "")
        ✔ should return the a single slash ("/")
        ✔ should return the a single slash ("/", "")
        ✔ should return the a single slash ("", "/")
        ✔ should return the a single slash ("/", "/")
        ✔ should return the a single slash ("//")
        ✔ should return the a single slash ("//", "")
        ✔ should return the a single slash ("", "//")
        ✔ should return the a single slash ("//", "//")
        ✔ should add a leading slash (one param)
        ✔ should add a leading slash (two params)
        ✔ should NOT add a trailing slash (one param)
        ✔ should NOT add a trailing slash (two params)
        ✔ should remove redundant slashes between collection and resource name
        ✔ should return "/users/", even though no resource name is given
        ✔ should return "/users/", even though the resource name is blank
        ✔ should return "/users/", even though the resource name is blank and the collection doesn't have a trailing slash
      valueOf
        ✔ should return the a single slash ()
        ✔ should return the a single slash ("")
        ✔ should return the a single slash ("", "")
        ✔ should return the a single slash ("/")
        ✔ should return the a single slash ("/", "")
        ✔ should return the a single slash ("", "/")
        ✔ should return the a single slash ("/", "/")
        ✔ should return the a single slash ("//")
        ✔ should return the a single slash ("//", "")
        ✔ should return the a single slash ("", "//")
        ✔ should return the a single slash ("//", "//")
        ✔ should add a leading slash (one param)
        ✔ should add a leading slash (two params)
        ✔ should NOT add a trailing slash (one param)
        ✔ should NOT add a trailing slash (two params)
        ✔ should remove redundant slashes between collection and resource name
        ✔ should return "/users/", even though no resource name is given
        ✔ should return "/users/", even though the resource name is blank
        ✔ should return "/users/", even though the resource name is blank and the collection doesn't have a trailing slash
      valueOf(express)
        ✔ should return the a single slash ()
        ✔ should return the a single slash ("")
        ✔ should return the a single slash ("", "")
        ✔ should return the a single slash ("/")
        ✔ should return the a single slash ("/", "")
        ✔ should return the a single slash ("", "/")
        ✔ should return the a single slash ("/", "/")
        ✔ should return the a single slash ("//")
        ✔ should return the a single slash ("//", "")
        ✔ should return the a single slash ("", "//")
        ✔ should return the a single slash ("//", "//")
        ✔ should add a leading slash (one param)
        ✔ should add a leading slash (two params)
        ✔ should NOT add a trailing slash (one param)
        ✔ should NOT add a trailing slash (two params)
        ✔ should remove redundant slashes between collection and resource name
        ✔ should return "/users/", even though no resource name is given
        ✔ should return "/users/", even though the resource name is blank
        ✔ should return "/users/", even though the resource name is blank and the collection doesn't have a trailing slash
      valueOf(router)
        ✔ should return the a single slash ()
        ✔ should return the a single slash ("")
        ✔ should return the a single slash ("", "")
        ✔ should return the a single slash ("/")
        ✔ should return the a single slash ("/", "")
        ✔ should return the a single slash ("", "/")
        ✔ should return the a single slash ("/", "/")
        ✔ should return the a single slash ("//")
        ✔ should return the a single slash ("//", "")
        ✔ should return the a single slash ("", "//")
        ✔ should return the a single slash ("//", "//")
        ✔ should add a leading slash (one param)
        ✔ should add a leading slash (two params)
        ✔ should NOT add a trailing slash (one param)
        ✔ should NOT add a trailing slash (two params)
        ✔ should remove redundant slashes between collection and resource name
        ✔ should return "/users/", even though no resource name is given
        ✔ should return "/users/", even though the resource name is blank
        ✔ should return "/users/", even though the resource name is blank and the collection doesn't have a trailing slash
    valueOf (case-insensitive, non-strict)
      ✔ should return a case-insensitive, non-strict string
      ✔ should return a case-sensitive, non-strict string
      ✔ should return a case-insensitive, strict string
      ✔ should return an empty string
      ✔ should remove the trailing slash from the collection
      ✔ should remove the trailing slash from the resource name
      ✔ should remove the trailing slash from the collection and resource name
      ✔ should remove the resource name and trailing slash (non-strict)
      ✔ should remove the resource name and trailing slash (strict)
    normalizeCollection
      ✔ should normalize the collection path
      ✔ should normalize an empty collection path
      ✔ should normalize an empty collection path (after splitting the `collection` parameter)
      ✔ should normalize a single-slash collection path
      ✔ should normalize a double-slash collection path
    normalizeName
      ✔ should normalize the resource names
      ✔ should normalize an empty resource name
      ✔ should normalize a single-slash resource name
      ✔ should normalize a double-slash resource name
    parse
      ✔ should initialize all properties from a POJO
      ✔ should initialize all properties from JSON
      ✔ should initialize all properties from a POJO array
      ✔ should initialize all properties from a JSON array

  Package exports
    ✔ should export the "createMiddleware" function
    ✔ should export the "Middleware" class
    ✔ should export the "Resource" class
    ✔ should export the "DataStore" class
    ✔ should export the "MemoryDataStore" class
    ✔ should export the "FileDataStore" class
    exports.createMiddleware
      ✔ should work with the "new" operator
      ✔ should work without the "new" operator
      ✔ can be called without any params
      ✔ can be called with just a file path
      ✔ can be called with just an object
      ✔ can be called with just an Express Application
      ✔ can be called with just an Express Router
      ✔ should call the callback if a Swagger object was given
      ✔ should call the callback if a file path was given
      ✔ should not call the callback if no Swagger API was given
      ✔ can be called with an empty Paths object
      ✔ can be called with empty Path Item objects
      Failure tests
        ✔ should throw an error if called with just a callback
        ✔ should throw an error if called with an empty object
        ✔ should throw an error if called with a new Object
        ✔ should throw an error if called with a Date object
        ✔ should return an error if parsing fails
    exports.Middleware
      ✔ should work with the "new" operator
      ✔ should NOT work without the "new" operator
    exports.Resource
      ✔ should work with the "new" operator
      ✔ should NOT work without the "new" operator
    exports.MemoryDataStore
      ✔ should work with the "new" operator
      ✔ should NOT work without the "new" operator
    exports.FileDataStore
      ✔ should work with the "new" operator
      ✔ should NOT work without the "new" operator

  FileServer middleware
    HEAD
      dereferenced JSON file
        ✔ should serve the fully-dereferenced JSON API
        ✔ should not serve the fully-dereferenced JSON API if `apiPath` is falsy
        ✔ should not serve the fully-dereferenced JSON API if `apiPath` is falsy
        ✔ should use the path specified in `apiPath`
        ✔ should use the path specified in `apiPath`
        ✔ should not serve at "/api-docs/" if an alternate path specified is set in the options
        ✔ should prepend the API's basePath to "/api-docs/"
        ✔ should prepend the API's basePath to the custom path
        ✔ should not use strict routing by default
        ✔ should use strict routing if enabled
        ✔ should use case-sensitive routing if enabled
        ✔ should use strict, case-sensitive routing, and a custom URL
        ✔ should use routing options instead of the Express app's settings
        1) should return an HTTP 500 if the Swagger API is invalid
        ✔ should not respond to POST requests
        ✔ should not respond to PUT requests
        ✔ should not respond to PATCH requests
        ✔ should not respond to DELETE requests
      raw Swagger files
        ✔ should serve the raw Swagger file
        ✔ should serve a referenced file in the same directory as the main Swagger file
        ✔ should serve a referenced file in a subdirectory of the main Swagger file
        ✔ should serve a referenced file in a parent directory of the main Swagger file
        ✔ should serve a referenced file in a parent directory of the main Swagger file
        ✔ should serve a referenced binary file
        ✔ should not serve the raw Swagger file if the path is falsy
        ✔ should use the path specified in the options
        ✔ should not serve at "/api-docs/" if an alternate path specified is set in the options
        ✔ should prepend the API's basePath to "/api-docs/"
        ✔ should prepend the API's basePath to the custom path
        ✔ should not use strict routing by default
        ✔ should use strict routing if enabled
        ✔ should use case-sensitive routing if enabled
        ✔ should use strict, case-sensitive routing, and a custom URL
        ✔ should use routing options instead of the Express app's settings
        ✔ should not respond to POST requests
        ✔ should not respond to PUT requests
        ✔ should not respond to PATCH requests
        ✔ should not respond to DELETE requests
    GET
      dereferenced JSON file
        ✔ should serve the fully-dereferenced JSON API
        ✔ should not serve the fully-dereferenced JSON API if `apiPath` is falsy
        ✔ should not serve the fully-dereferenced JSON API if `apiPath` is falsy
        ✔ should use the path specified in `apiPath`
        ✔ should use the path specified in `apiPath`
        ✔ should not serve at "/api-docs/" if an alternate path specified is set in the options
        ✔ should prepend the API's basePath to "/api-docs/"
        ✔ should prepend the API's basePath to the custom path
        ✔ should not use strict routing by default
        ✔ should use strict routing if enabled
        ✔ should use case-sensitive routing if enabled
        ✔ should use strict, case-sensitive routing, and a custom URL
        ✔ should use routing options instead of the Express app's settings
        2) should return an HTTP 500 if the Swagger API is invalid
        ✔ should not respond to POST requests
        ✔ should not respond to PUT requests
        ✔ should not respond to PATCH requests
        ✔ should not respond to DELETE requests
      raw Swagger files
        ✔ should serve the raw Swagger file
        ✔ should serve a referenced file in the same directory as the main Swagger file
        ✔ should serve a referenced file in a subdirectory of the main Swagger file
        ✔ should serve a referenced file in a parent directory of the main Swagger file
        ✔ should serve a referenced file in a parent directory of the main Swagger file
        ✔ should serve a referenced binary file
        ✔ should not serve the raw Swagger file if the path is falsy
        ✔ should use the path specified in the options
        ✔ should not serve at "/api-docs/" if an alternate path specified is set in the options
        ✔ should prepend the API's basePath to "/api-docs/"
        ✔ should prepend the API's basePath to the custom path
        ✔ should not use strict routing by default
        ✔ should use strict routing if enabled
        ✔ should use case-sensitive routing if enabled
        ✔ should use strict, case-sensitive routing, and a custom URL
        ✔ should use routing options instead of the Express app's settings
        ✔ should not respond to POST requests
        ✔ should not respond to PUT requests
        ✔ should not respond to PATCH requests
        ✔ should not respond to DELETE requests

  JSON Schema constructor
    ✔ should throw an error if the schema is missing
    ✔ should throw an error if the schema is null
    ✔ should not throw an error if the schema is empty
    ✔ should throw an error if the schema type is unsupported
    ✔ should not throw an error if the schema type is missing

  JSON Schema - parse array params
    ✔ should parse a valid array param
    ✔ should parse space-separated array params
    ✔ should parse tab-separated array params
    ✔ should parse pipe-separated array params
    ✔ should parse comma-separated array params
    ✔ should parse array items as integers
    ✔ should parse array items as floats
    ✔ should parse array items as bytes
    ✔ should parse array items as dates
    ✔ should parse array items as arrays
    ✔ should parse an optional, unspecified array param
    ✔ should parse the default Array value if no value is specified
    ✔ should parse the default String value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the array contains invalid items
    ✔ should throw an error if schema validation fails for string arrays
    ✔ should throw an error if schema validation fails for numeric arrays
    ✔ should throw an error if an array item fails schema validation
    ✔ should throw an error if required and not specified

  JSON Schema - parse boolean params
    ✔ should parse a valid boolean param
    ✔ should parse an optional, unspecified boolean param
    ✔ should parse the default value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a valid boolean
    ✔ should throw an error if required and not specified

  JSON Schema - parse byte params
    ✔ should parse a valid byte param
    ✔ should parse an optional, unspecified byte param
    ✔ should parse the default value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a valid byte
    ✔ should throw an error if the value fails schema validation
    ✔ should throw an error if the value is above the byte maximum
    ✔ should throw an error if the value is below the byte minimum
    ✔ should throw an error if required and not specified

  JSON Schema - parse date-time params
    ✔ should parse a valid date-time param
    ✔ should parse an optional, unspecified date-time param
    ✔ should parse the default string value if no value is specified
    ✔ should parse the default date-time value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a date-time
    ✔ should throw an error if the value is not a valid date-time
    ✔ should throw an error if the value is a date
    ✔ should throw an error if the value fails schema validation
    - should throw an error if the value is above the maximum
    - should NOT throw an error if the value is equal to the maximum
    - should throw an error if the value is equal the exclusive maximum
    - should throw an error if the maximum is not valid
    - should throw an error if the value is below the minimum
    - should NOT throw an error if the value is equal to the minimum
    - should throw an error if the value is equal the exclusive minimum
    - should throw an error if the minimum is not valid
    ✔ should throw an error if required and not specified

  JSON Schema - parse date params
    ✔ should parse a valid date param
    ✔ should parse an optional, unspecified date param
    ✔ should parse the default string value if no value is specified
    ✔ should parse the default Date value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a date
    ✔ should throw an error if the value is not a valid date
    ✔ should throw an error if the value is a date-time
    ✔ should throw an error if the value fails schema validation
    - should throw an error if the value is above the maximum
    - should NOT throw an error if the value is equal to the maximum
    - should throw an error if the value is equal the exclusive maximum
    - should throw an error if the maximum is not valid
    - should throw an error if the value is below the minimum
    - should NOT throw an error if the value is equal to the minimum
    - should throw an error if the value is equal the exclusive minimum
    - should throw an error if the minimum is not valid
    ✔ should throw an error if required and not specified

  JSON Schema - parse file params
    ✔ should parse a valid file param
    ✔ should parse large file params if there is no maxLength
    ✔ should parse empty file params if there is no minLength
    3) should parse an optional, unspecified file param
    4) should parse the default File value if no value is specified
    ✔ should throw an error if the file is smaller than the minLength
    ✔ should throw an HTTP 413 error if the file is larger than the maxLength
    ✔ should throw an error if the minLength is invalid
    ✔ should throw an error if the maxLength is invalid
    5) should throw an error if required and not specified
    6) should throw an error if the value is not a file

  JSON Schema - parse integer params
    ✔ should parse a valid integer param
    ✔ should parse an optional, unspecified integer param
    ✔ should parse the default value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a valid integer
    ✔ should throw an error if the value is a float
    ✔ should throw an error if the value fails schema validation
    ✔ should throw an error if the value is above the int32 maximum
    ✔ should throw an error if the value is below the int32 minimum
    ✔ should throw an error if the value is above the int64 maximum
    ✔ should throw an error if the value is below the int64 minimum
    ✔ should throw an error if required and not specified

  JSON Schema - parse number params
    ✔ should parse a valid number param
    ✔ should parse an optional, unspecified number param
    ✔ should parse the default value if no value is specified
    ✔ should parse the default value if the specified value is blank
    ✔ should throw an error if the value is blank
    ✔ should throw an error if the value is not a valid number
    ✔ should throw an error if the value fails schema validation
    ✔ should throw an error if the value is above the float maximum
    ✔ should throw an error if the value is below the float minimum
    ✔ should throw an error if the value is above the double maximum
    ✔ should throw an error if the value is below the double minimum
    ✔ should throw an error if required and not specified

  JSON Schema - parse object params
    ✔ should parse a valid object param
    ✔ should parse an optional, unspecified object param
    ✔ should parse the default Object value if no value is specified
    ✔ should parse the default String value if no value is specified
    ✔ should parse the default value if the specified value is blank
    7) should throw an error if the value is blank
    ✔ should throw an error if schema validation fails
    ✔ should throw an error if required and not specified

  JSON Schema sample data
    sampleNumber
      ✔ should generate a valid number
      ✔ should generate a valid float
      ✔ should generate a valid double
      ✔ should generate a valid number within min/max
      ✔ should generate a valid number within exclusive min/max
    sampleInteger
      ✔ should generate a valid number
      ✔ should generate a valid byte
      ✔ should generate a valid int32
      ✔ should generate a valid int64
      ✔ should generate a valid number above minimum
      ✔ should generate a valid number above exclusive minimum
      ✔ should generate a valid number below maximum
      ✔ should generate a valid number below exclusive maximum
      ✔ should generate a valid number within min/max
      ✔ should generate a valid number within exclusive min/max
    sampleBoolean
      ✔ should generate a valid boolean
    sampleDate
      ✔ should generate a valid date-time
      ✔ should generate a valid date
      ✔ should generate a valid date above minimum
      ✔ should generate a valid date above exclusive minimum
      ✔ should generate a valid date below maximum
      ✔ should generate a valid date below exclusive maximum
      ✔ should generate a valid date within min/max
      ✔ should generate a valid date within exclusive min/max
    sampleString
      ✔ should generate a valid string
      ✔ should generate a valid string of minLength
      ✔ should generate a valid string of maxLength
      ✔ should generate a valid string between minLength and maxLength
    sampleArray
      ✔ should generate a valid array
      ✔ should generate an array of minItems
      ✔ should generate an array of maxItems
      ✔ should generate an array between minItems and maxItems
      ✔ should generate an array of arrays
      ✔ should generate an array of objects
    sampleObject
      ✔ should generate a valid object
      ✔ should generate nested objects
      ✔ should generate deeply nested objects
      ✔ should generate an empty object

  Mock Content-Type header
    Object responses
      ✔ should use "application/json" if no "produces" MIME types are defined
      ✔ should use "application/json" if the "produces" list is empty
      ✔ should use "application/json" if none of the "produces" MIME types are supported
      ✔ should use "application/json" if included in the "produces" list
      ✔ should use the first "json" type in the "produces" list
      ✔ should use "text/json" if included in the "produces" list
      ✔ should use "application/calendar+json" if included in the "produces" list
    Text responses
      ✔ should use "text/plain" if no "produces" MIME types are defined
      ✔ should use "text/plain" if the "produces" list is empty
      ✔ should use "text/plain" if none of the "produces" MIME types are supported
      ✔ should use "text/plain" if included in the "produces" list
      ✔ should use the first "text" type in the "produces" list
      ✔ should use "text/html" if included in the "produces" list
      ✔ should use "text/xml" if included in the "produces" list
      ✔ should use "application/xml" if included in the "produces" list
    File responses
(node:18621) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
      ✔ should use "application/octet-stream" if no "produces" MIME types are defined
      ✔ should use "application/octet-stream" if the "produces" list is empty
      ✔ should use the first MIME type in the "produces" list
      ✔ should use "application/octet-stream" if it is first in the "produces" list
      ✔ should use "image/jpeg" if it is first in the "produces" list

  Query Collection Mock
    DELETE
      ✔ should delete all resources in the collection
      ✔ should delete an empty collection
      ✔ should return the deleted resources if the Swagger API schema is an array
      ✔ should return the first deleted resource if the Swagger API schema is an object
      ✔ should return the deleted resources if the Swagger API schema is a wrapped array
      ✔ should return the first deleted resource if the Swagger API schema is a wrapped object
      ✔ should not return the deleted resources on a 204 response, even if the Swagger API schema is an array
      ✔ should return an empty array if nothing was deleted
      ✔ should return nothing if nothing was deleted and the Swagger API schema is an object
      ✔ should return `res.body` if already set by other middleware
      ✔ should return a 500 error if a DataStore open error occurs
      ✔ should return a 500 error if a DataStore update error occurs
      different data types
        ✔ should delete a string
        ✔ should delete an empty string
        ✔ should delete a number
        ✔ should delete a date
        ✔ should delete a Buffer (as a string)
        ✔ should delete a Buffer (as JSON)
        ✔ should delete an undefined value
        ✔ should delete a null value
        8) should delete multipart/form-data
        9) should delete a file
        10) should delete a file attachment
      filter
        ✔ should filter by a string property
        ✔ should filter by a numeric property
        ✔ should filter by an array property (single value)
        ✔ should filter by an array property (multiple values, comma-separated)
        ✔ should filter by an array property (multiple values, pipe-separated)
        ✔ should filter by an array property (multiple values, space-separated)
        ✔ should filter by an array property (multiple values, repeated)
        ✔ should filter by multiple properties
        ✔ should filter by a deep property
        ✔ should filter by multiple deep properties
        ✔ should not filter by properties that aren't defined in the Swagger API
        ✔ should only filter by properties that are defined in the Swagger API

  Edit Resource Mock
    DELETE
      ✔ should delete a resource
      ✔ should delete a non-existent resource
      ✔ should return the deleted resource if the Swagger API schema is an object
      ✔ should return the remaining resources in the collection if the Swagger API schema is an array
      ✔ should return the deleted resource if the Swagger API schema is a wrapped object
      ✔ should return the remaining resources in the collection if the Swagger API schema is a wrapped array
      ✔ should not return the deleted resource on a 204 response, even if the Swagger API schema is an object
      ✔ should return nothing if nothing was deleted, even if the Swagger API schema is an object
      ✔ should return an empty collection if nothing was deleted, even if the Swagger API schema is an array
      ✔ should return `res.body` if already set by other middleware
      ✔ should return a 500 error if a DataStore error occurs
      different data types
        ✔ should return a string
        ✔ should return an empty string
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        ✔ should return a null value
        11) should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment

  Edit Collection Mock
    PATCH
      Shared tests
        ✔ should add a new resource to the collection
        ✔ should add multiple resources to the collection
        ✔ should add zero resources to the collection
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection (including the new resource) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should set the "Location" HTTP header to new resource's URL
        ✔ should set the "Location" HTTP header to the collection URL
        ✔ should set the "Location" HTTP header to the collection URL, even though it's empty
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (single object)
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (array)
        ✔ should return a 500 error if a DataStore open error occurs
        ✔ should return a 500 error if a DataStore update error occurs
      Determining resource names (by data type)
        ✔ should support strings
        ✔ should support empty strings
        ✔ should support very large strings
        ✔ should support numbers
        ✔ should support dates
        ✔ should support date-times
        ✔ should support Buffers (as a string)
        ✔ should support Buffers (as JSON)
        12) should support undefined values
        13) should support multipart/form-data
        ✔ should support files
      Determining resource names (by property names)
        ✔ should determine the resource name from "Name" properties in its schema
        ✔ should determine the resource name from "Name" properties in its schema, even if they're not present in the data
        - should determine the resource name from "Name" properties in its data, even if they're not in the schema
        ✔ should use a "byte" property in the schema as the resource name
        ✔ should use a "boolean" property in the schema as the resource name
        - should use a "boolean" property in the data as the resource name
        ✔ should use a "date" property in the schema as the resource name
        ✔ should use a "date-time" property in the schema as the resource name
        - should use a Date property in the data as the resource name
        ✔ should use a Date property that was added by other middleware as the resource name
        - should NOT use object or array properties as the resource name
      Determining resource names (by required properties)
        ✔ should use the first required property as the resource name
        ✔ should NOT use object or array properties as the resource name
      Determining resource names (by file name)
        ✔ should use the client-side file name as the resource name
        14) should use the server-side file name as the resource name
        ✔ should use an auto-generated resource name if no file was uploaded
        15) should use an auto-generated resource name if the body is empty
        ✔ should use an auto-generated resource name if there is more than one file param
      Auto-generated resource names
        ✔ should generate a unique ID if no "Name" property can be determined
        ✔ should generate a string value for the resource's "Name" property, if not set
        ✔ should generate a string value for the resource's "Name" property, even if the body is empty
        ✔ should generate an integer value for the resource's "Name" property, if not set
        ✔ should generate a date value for the resource's "Name" property, if not set
        ✔ should generate a date-time value for the resource's "Name" property, if not set
        ✔ should NOT generate an array value for the resource's "Name" property, if not set
    PUT
      Shared tests
        ✔ should add a new resource to the collection
        ✔ should add multiple resources to the collection
        ✔ should add zero resources to the collection
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection (including the new resource) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should set the "Location" HTTP header to new resource's URL
        ✔ should set the "Location" HTTP header to the collection URL
        ✔ should set the "Location" HTTP header to the collection URL, even though it's empty
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (single object)
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (array)
        ✔ should return a 500 error if a DataStore open error occurs
        ✔ should return a 500 error if a DataStore update error occurs
      Determining resource names (by data type)
        ✔ should support strings
        ✔ should support empty strings
        ✔ should support very large strings
        ✔ should support numbers
        ✔ should support dates
        ✔ should support date-times
        ✔ should support Buffers (as a string)
        ✔ should support Buffers (as JSON)
        16) should support undefined values
        17) should support multipart/form-data
        ✔ should support files
      Determining resource names (by property names)
        ✔ should determine the resource name from "Name" properties in its schema
        ✔ should determine the resource name from "Name" properties in its schema, even if they're not present in the data
        - should determine the resource name from "Name" properties in its data, even if they're not in the schema
        ✔ should use a "byte" property in the schema as the resource name
        ✔ should use a "boolean" property in the schema as the resource name
        - should use a "boolean" property in the data as the resource name
        ✔ should use a "date" property in the schema as the resource name
        ✔ should use a "date-time" property in the schema as the resource name
        - should use a Date property in the data as the resource name
        ✔ should use a Date property that was added by other middleware as the resource name
        - should NOT use object or array properties as the resource name
      Determining resource names (by required properties)
        ✔ should use the first required property as the resource name
        ✔ should NOT use object or array properties as the resource name
      Determining resource names (by file name)
        ✔ should use the client-side file name as the resource name
        18) should use the server-side file name as the resource name
        ✔ should use an auto-generated resource name if no file was uploaded
        19) should use an auto-generated resource name if the body is empty
        ✔ should use an auto-generated resource name if there is more than one file param
      Auto-generated resource names
        ✔ should generate a unique ID if no "Name" property can be determined
        ✔ should generate a string value for the resource's "Name" property, if not set
        ✔ should generate a string value for the resource's "Name" property, even if the body is empty
        ✔ should generate an integer value for the resource's "Name" property, if not set
        ✔ should generate a date value for the resource's "Name" property, if not set
        ✔ should generate a date-time value for the resource's "Name" property, if not set
        ✔ should NOT generate an array value for the resource's "Name" property, if not set
    POST
      Shared tests
        ✔ should add a new resource to the collection
        ✔ should add multiple resources to the collection
        ✔ should add zero resources to the collection
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is an object
        ✔ should return the first new resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection (including the new resource) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is an array
        ✔ should return the whole collection (including the new resources) if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should set the "Location" HTTP header to new resource's URL
        ✔ should set the "Location" HTTP header to the collection URL
        ✔ should set the "Location" HTTP header to the collection URL, even though it's empty
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (single object)
        ✔ should not set the "Location" HTTP header if not specified in the Swagger API (array)
        ✔ should return a 500 error if a DataStore open error occurs
        ✔ should return a 500 error if a DataStore update error occurs
      Determining resource names (by data type)
        ✔ should support strings
        ✔ should support empty strings
        ✔ should support very large strings
        ✔ should support numbers
        ✔ should support dates
        ✔ should support date-times
        ✔ should support Buffers (as a string)
        ✔ should support Buffers (as JSON)
        20) should support undefined values
        21) should support multipart/form-data
        ✔ should support files
      Determining resource names (by property names)
        ✔ should determine the resource name from "Name" properties in its schema
        ✔ should determine the resource name from "Name" properties in its schema, even if they're not present in the data
        - should determine the resource name from "Name" properties in its data, even if they're not in the schema
        ✔ should use a "byte" property in the schema as the resource name
        ✔ should use a "boolean" property in the schema as the resource name
        - should use a "boolean" property in the data as the resource name
        ✔ should use a "date" property in the schema as the resource name
        ✔ should use a "date-time" property in the schema as the resource name
        - should use a Date property in the data as the resource name
        ✔ should use a Date property that was added by other middleware as the resource name
        - should NOT use object or array properties as the resource name
      Determining resource names (by required properties)
        ✔ should use the first required property as the resource name
        ✔ should NOT use object or array properties as the resource name
      Determining resource names (by file name)
        ✔ should use the client-side file name as the resource name
        22) should use the server-side file name as the resource name
        ✔ should use an auto-generated resource name if no file was uploaded
        23) should use an auto-generated resource name if the body is empty
        ✔ should use an auto-generated resource name if there is more than one file param
      Auto-generated resource names
        ✔ should generate a unique ID if no "Name" property can be determined
        ✔ should generate a string value for the resource's "Name" property, if not set
        ✔ should generate a string value for the resource's "Name" property, even if the body is empty
        ✔ should generate an integer value for the resource's "Name" property, if not set
        ✔ should generate a date value for the resource's "Name" property, if not set
        ✔ should generate a date-time value for the resource's "Name" property, if not set
        ✔ should NOT generate an array value for the resource's "Name" property, if not set

  Edit Resource Mock
    PUT
      Shared tests
        ✔ should create a new resource
        ✔ should create a new resource at the specified URL, even if the primary key is different
        ✔ should create a new resource using default value in the JSON schema
        ✔ should create a new resource using default property values in the JSON schema
        ✔ should create a new resource using data tha was added by other middleware
        ✔ should replace an existing resource at the URL
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the saved resource if the Swagger API schema is an object
        ✔ should return the whole collection if the Swagger API schema is an array
        ✔ should return the saved resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should return a 500 error if a DataStore error occurs
      Data type tests
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        24) should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment
      PUT tests
        ✔ should overwrite the existing resource rather than merging it
        ✔ should return a 500 error if a DataStore error occurs
    PATCH
      Shared tests
        ✔ should create a new resource
        ✔ should create a new resource at the specified URL, even if the primary key is different
        ✔ should create a new resource using default value in the JSON schema
        ✔ should create a new resource using default property values in the JSON schema
        ✔ should create a new resource using data tha was added by other middleware
        ✔ should replace an existing resource at the URL
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the saved resource if the Swagger API schema is an object
        ✔ should return the whole collection if the Swagger API schema is an array
        ✔ should return the saved resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should return a 500 error if a DataStore error occurs
      Data type tests
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        25) should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment
      PATCH/POST tests
        ✔ should merge the new resource with the existing resource
    POST
      Shared tests
        ✔ should create a new resource
        ✔ should create a new resource at the specified URL, even if the primary key is different
        ✔ should create a new resource using default value in the JSON schema
        ✔ should create a new resource using default property values in the JSON schema
        ✔ should create a new resource using data tha was added by other middleware
        ✔ should replace an existing resource at the URL
        ✔ should not return data if not specified in the Swagger API
        ✔ should return the saved resource if the Swagger API schema is an object
        ✔ should return the whole collection if the Swagger API schema is an array
        ✔ should return the saved resource if the Swagger API schema is a wrapped object
        ✔ should return the whole collection if the Swagger API schema is a wrapped array
        ✔ should return `res.body` if already set by other middleware
        ✔ should return a 500 error if a DataStore error occurs
      Data type tests
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        26) should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment
      PATCH/POST tests
        ✔ should merge the new resource with the existing resource

  Mock middleware
    ✔ should do nothing if no other middleware is used
    ✔ should do nothing if the Metadata middleware is not used
    ✔ should do nothing if the API is not valid
    ✔ should do nothing if "mock" is disabled in Express
    ✔ can be passed an Express Application
    ✔ can be passed a data store
    ✔ can be passed an Express App and a data store
    ✔ should get the data store from the Express App
    ✔ should get the data store from the Express App instead of the param
    ✔ should detect changes to the data store from the Express App

  Query Collection Mock
    application/json
      GET
        ✔ should return an empty array if there is no data in the collection
        ✔ should return a single-item array if there is one item in the collection
        ✔ should return a single-item array containing the root item in the collection
        ✔ should return an array of all items in the collection
        ✔ should return a wrapped array of all items in the collection
        ✔ should return an array of all items in the collection, including the root resource
        ✔ should not return anything if no response schema is specified in the Swagger API
        ✔ should return `res.body` if already set by other middleware
        ✔ should return the default value instead of an empty array
        ✔ should return the example value instead of an empty array
        ✔ should set the Last-Modified date to Now() if the results are empty (1008ms)
        ✔ should set the Last-Modified date to the ModifiedOn date of the only item in the collection (1010ms)
        ✔ should set the Last-Modified date to the max ModifiedOn date in the collection (3011ms)
        ✔ should return a 500 error if a DataStore error occurs
        different data types
          ✔ should return a string
          ✔ should return an empty string
          ✔ should return a number
          ✔ should return a date
          ✔ should return a date-time
          ✔ should return a Buffer (as a string)
          ✔ should return a Buffer (as JSON)
          ✔ should return a null value
          27) should return multipart/form-data
          28) should return a file
          29) should return a file attachment
        filter
          ✔ should filter by a string property
          ✔ should filter by a numeric property
          ✔ should filter by an array property (single value)
          ✔ should filter by an array property (multiple values, comma-separated)
          ✔ should filter by an array property (multiple values, pipe-separated)
          ✔ should filter by an array property (multiple values, space-separated)
          ✔ should filter by an array property (multiple values, repeated)
          ✔ should filter by multiple properties
          ✔ should filter by a deep property
          ✔ should filter by multiple deep properties
          ✔ should not filter by properties that aren't defined in the Swagger API
          ✔ should only filter by properties that are defined in the Swagger API
    application/json
      HEAD
        ✔ should return an empty array if there is no data in the collection
        ✔ should return a single-item array if there is one item in the collection
        ✔ should return a single-item array containing the root item in the collection
        ✔ should return an array of all items in the collection
        ✔ should return a wrapped array of all items in the collection
        ✔ should return an array of all items in the collection, including the root resource
        ✔ should not return anything if no response schema is specified in the Swagger API
        ✔ should return `res.body` if already set by other middleware
        ✔ should return the default value instead of an empty array
        ✔ should return the example value instead of an empty array
        ✔ should set the Last-Modified date to Now() if the results are empty (1005ms)
        ✔ should set the Last-Modified date to the ModifiedOn date of the only item in the collection (1008ms)
        ✔ should set the Last-Modified date to the max ModifiedOn date in the collection (3019ms)
        ✔ should return a 500 error if a DataStore error occurs
        different data types
          ✔ should return a string
          ✔ should return an empty string
          ✔ should return a number
          ✔ should return a date
          ✔ should return a date-time
          ✔ should return a Buffer (as a string)
          ✔ should return a Buffer (as JSON)
          ✔ should return a null value
          ✔ should return multipart/form-data
          ✔ should return a file
          ✔ should return a file attachment
        filter
          ✔ should filter by a string property
          ✔ should filter by a numeric property
          ✔ should filter by an array property (single value)
          ✔ should filter by an array property (multiple values, comma-separated)
          ✔ should filter by an array property (multiple values, pipe-separated)
          ✔ should filter by an array property (multiple values, space-separated)
          ✔ should filter by an array property (multiple values, repeated)
          ✔ should filter by multiple properties
          ✔ should filter by a deep property
          ✔ should filter by multiple deep properties
          ✔ should not filter by properties that aren't defined in the Swagger API
          ✔ should only filter by properties that are defined in the Swagger API
    application/json
      OPTIONS
        ✔ should return an empty array if there is no data in the collection
        ✔ should return a single-item array if there is one item in the collection
        ✔ should return a single-item array containing the root item in the collection
        ✔ should return an array of all items in the collection
        ✔ should return a wrapped array of all items in the collection
        ✔ should return an array of all items in the collection, including the root resource
        ✔ should not return anything if no response schema is specified in the Swagger API
        ✔ should return `res.body` if already set by other middleware
        ✔ should return the default value instead of an empty array
        ✔ should return the example value instead of an empty array
        ✔ should set the Last-Modified date to Now() if the results are empty (1004ms)
        ✔ should set the Last-Modified date to the ModifiedOn date of the only item in the collection (1005ms)
        ✔ should set the Last-Modified date to the max ModifiedOn date in the collection (3014ms)
        different data types
          ✔ should return a string
          ✔ should return an empty string
          ✔ should return a number
          ✔ should return a date
          ✔ should return a date-time
          ✔ should return a Buffer (as a string)
          ✔ should return a Buffer (as JSON)
          ✔ should return a null value
          ✔ should return multipart/form-data
          ✔ should return a file
          ✔ should return a file attachment
        filter
          ✔ should filter by a string property
          ✔ should filter by a numeric property
          ✔ should filter by an array property (single value)
          ✔ should filter by an array property (multiple values, comma-separated)
          ✔ should filter by an array property (multiple values, pipe-separated)
          ✔ should filter by an array property (multiple values, space-separated)
          ✔ should filter by an array property (multiple values, repeated)
          ✔ should filter by multiple properties
          ✔ should filter by a deep property
          ✔ should filter by multiple deep properties
          ✔ should not filter by properties that aren't defined in the Swagger API
          ✔ should only filter by properties that are defined in the Swagger API

  Query Resource Mock
    HEAD
      ✔ should return only the requested resource
      ✔ should return a wrapped resource
      ✔ should not return anything if no response schema is specified in the Swagger API
      ✔ should return `res.body` if already set by other middleware
      ✔ should return `res.body` instead of a 404
      ✔ should return the default value instead of a 404
      - should return the example value instead of a 404
      ✔ should set the Last-Modified date to the ModifiedOn date of the resource (1005ms)
      ✔ should throw a 404 if the resource does not exist
      ✔ should return a 500 error if a DataStore error occurs
      different data types
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        ✔ should return the default value instead of undefined
        - should return the example value instead of undefined
        ✔ should return a null value
        ✔ should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment (using the basename of the URL)
        ✔ should return a file attachment (using the default filename in the Swagger API)
        ✔ should return a file attachment (using the basename of the URL when there's no default filename in the Swagger API)
    OPTIONS
      ✔ should return only the requested resource
      ✔ should return a wrapped resource
      ✔ should not return anything if no response schema is specified in the Swagger API
      ✔ should return `res.body` if already set by other middleware
      ✔ should return `res.body` instead of a 404
      ✔ should return the default value instead of a 404
      - should return the example value instead of a 404
      ✔ should set the Last-Modified date to the ModifiedOn date of the resource (1007ms)
      different data types
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        ✔ should return the default value instead of undefined
        - should return the example value instead of undefined
        ✔ should return a null value
        ✔ should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment (using the basename of the URL)
        ✔ should return a file attachment (using the default filename in the Swagger API)
        ✔ should return a file attachment (using the basename of the URL when there's no default filename in the Swagger API)
    GET
      ✔ should return only the requested resource
      ✔ should return a wrapped resource
      ✔ should not return anything if no response schema is specified in the Swagger API
      ✔ should return `res.body` if already set by other middleware
      ✔ should return `res.body` instead of a 404
      ✔ should return the default value instead of a 404
      - should return the example value instead of a 404
      ✔ should set the Last-Modified date to the ModifiedOn date of the resource (1006ms)
      ✔ should throw a 404 if the resource does not exist
      ✔ should return a 500 error if a DataStore error occurs
      different data types
        ✔ should return an object
        ✔ should return a string
        ✔ should return an empty string response
        ✔ should return a number
        ✔ should return a date
        ✔ should return a Buffer (as a string)
        ✔ should return a Buffer (as JSON)
        ✔ should return an undefined value
        ✔ should return the default value instead of undefined
        - should return the example value instead of undefined
        ✔ should return a null value
        30) should return multipart/form-data
        ✔ should return a file
        ✔ should return a file attachment (using the basename of the URL)
        ✔ should return a file attachment (using the default filename in the Swagger API)
        ✔ should return a file attachment (using the basename of the URL when there's no default filename in the Swagger API)

  Mock response headers
    ✔ should set headers to the default values specified in the Swagger API
    ✔ should not override headers that were already set by other middleware
    ✔ should generate sample values for headers that have no values
    Location header
      ✔ should set the Location header to the newly-created resource
      ✔ should set the Location header to the existing resource
      ✔ should set the Location header to the newly-created resource for a nested router
      ✔ should set the Location header to the existing resource for a nested router
      ✔ should not set the Location header if not specified in the Swagger API
    Last-Modified header
      ✔ should set the Last-Modified header to the current date/time if no data exists
      ✔ should set the Last-Modified header to the date/time that the data was created (1008ms)
      ✔ should set the Last-Modified header to the date/time that the data was last modified (1012ms)
      ✔ should not set the Last-Modified header if not specified in the Swagger API
    Content-Disposition header
      ✔ should set the Content-Disposition header to basename of the Location URL
      ✔ should set the Content-Disposition header to basename of the request URL
      ✔ should set the Content-Disposition header to the basename of the request URL for a nested router
      ✔ should not set the Content-Disposition header if not specified in the Swagger API
    Set-Cookie header
      ✔ should set the Set-Cookie header to a random value
      ✔ should set the Set-Cookie header to the same value, if it already exists
      ✔ should not set the Set-Cookie header if already set by other middleware
      ✔ should not set the Set-Cookie header if not specified in the Swagger API

  Mock Response
    ✔ should use the 200 response, if it exists
    ✔ should use the lowest 2XX response that exists
    ✔ should use the lowest 3XX response that exists
    ✔ should use the lowest 1XX response that exists
    ✔ should use a 200 response if "default" exists
    - should use a 201 response for POST operations if "default" exists
    - should not use a 201 response for POST operations if "default" does not exist
    ✔ should use a 201 response for PUT operations if "default" exists
    ✔ should not use a 201 response for PUT operations if "default" does not exist
    ✔ should use a 204 response for DELETE operations if "default" exists
    ✔ should not use a 204 response for DELETE operations if "default" does not exist

  ParamParser middleware
    Query param parser
      ✔ should not parse query params if the metadata middleware is not used
      ✔ should parse query params
      ✔ should decode encoded query params
      ✔ should set query params to undefined if optional and unspecified
      ✔ should set query params to their defaults if unspecified
      ✔ should throw an error if query params are invalid
    Header param parser
      ✔ should not parse header params if the metadata middleware is not used
      ✔ should parse header params
      ✔ should decode encoded header params
      ✔ should set header params to undefined if optional and unspecified
      ✔ should set header params to their defaults if unspecified
      ✔ should throw an error if header params are invalid
      - should throw an HTTP 411 error if the Content-Length header is required and is missing
    Form Data param parser
      ✔ should not parse formData params if the metadata middleware is not used
      ✔ should parse formData params
      ✔ should decode encoded formData params
      ✔ should set formData params to undefined if optional and unspecified
      ✔ should set formData params to their defaults if unspecified
      ✔ should throw an error if formData params are invalid
      31) should parse file params
    Body param parser
      ✔ should parse the body param
      ✔ should validate a non-JSON body param, if third-party parsing middleware is used
      ✔ should validate a non-object body param
      ✔ should set the body to undefined if optional and unspecified
      ✔ should set the body to its default if optional and unspecified
      ✔ should throw an error if the body param is required and unspecified
      ✔ should throw an error if the body param is required and unspecified, even if there's a default value
      ✔ should throw an error if the body param is invalid

  PathParser middleware
    ✔ should not parse path params if the metadata middleware is not used
    ✔ should parse path params
    ✔ should parse path params using the Express app of the Middleware class
    ✔ should parse path params using the Express app of the Middleware class, even if routing options are specified
    ✔ should parse path params that are overridden by an operation
    ✔ should decode encoded path params
    ✔ should parse path params as the proper data type
    ✔ should parse path params of nested Routers that use the `parseRequest` middleware
    ✔ should not set req.params properties if the path is not parameterized
    ✔ should not parse path params if the middleware is not parameterized
    ✔ should not parse path params if param names don't match
    ✔ should not parse non-path params
    ✔ should throw an error if path params are invalid
    ✔ should detect new path params when the API changes
    ✔ should detect changes to existing path params when the API changes
    ✔ should stop parsing path params that no longer exist after the API changes

  RequestMetadata middleware
    ✔ should set all req.swagger properties for a parameterless path
    ✔ should set all req.swagger properties for a parameterized path
    ✔ should set all req.swagger properties when the API has no basePath
    ✔ should not set any req.swagger properties if the API was not parsed successfully
    ✔ should not set any req.swagger properties if the request isn't under the basePath
    ✔ should set req.swagger.api, even if the Paths object is empty
    ✔ should set req.swagger.api, even if the path isn't matched
    ✔ should set req.swagger.api and req.swagger.path, even if the Path Item objects are empty
    ✔ should set req.swagger.api and req.swagger.path, even if the operation isn't matched
    ✔ should use case-insensitive matching if "case sensitive routing" is disabled
    ✔ should use case-sensitive matching if "case sensitive routing" is enabled
    ✔ should use case-sensitive matching if "case sensitive routing" is enabled on the Middleware class
    ✔ should use case-sensitive matching if "caseSensitive" is set
    ✔ should use loose matching if "strict routing" is disabled
    ✔ should use strict matching if "strict routing" is enabled
    ✔ should use strict matching if "strict routing" is enabled on the Middleware class
    ✔ should use strict matching if "strict" is set
    ✔ should detect when the API changes
    ✔ should set req.swagger.security to an empty array if not defined on the operation or API
    ✔ should set req.swagger.security to an empty array if not defined on the API

  RequestParser middleware
    method signatures
      ✔ can be called without any params
      ✔ can be called with just an Express app
      ✔ can be called with just routing options
      ✔ can be called with just options
      ✔ can be called with an Express app and options
      ✔ can be called with a routing options and options
    Cookie parser
      ✔ should parse unsigned cookies
      ✔ should parse signed cookies if a secret is provided
      ✔ should not parse signed cookies if no secret is provided
      ✔ should parse signed and unsigned cookies if a secret is provided
      ✔ should not throw an error if the cookie header is invalid
      ✔ should not throw an error if cookie values are invalid
      ✔ should not throw an error if signed cookies are invalid
    JSON parser
      ✔ should parse application/json
      ✔ should parse text/json
      ✔ should parse application/calendar+json
      ✔ can be modified to accept other content types
      ✔ should throw an error if the JSON is malformed
    Text parser
      ✔ should parse text/plain
      ✔ should parse text/css
      ✔ should parse text/xml
      ✔ can be modified to accept other content types
    URL-encoded parser
      ✔ should parse encoded data
      ✔ can be modified to accept other content types
      ✔ should not throw an error if the data is malformed
    Raw parser
      ✔ should parse plain text as a Buffer
      ✔ should parse binary data as a Buffer
      ✔ should parse application/xml as a Buffer
      ✔ should parse application/soap+xml as a Buffer
      ✔ should support large files (up to 5MB) by default
      ✔ should not support files larger than 5MB by default
      ✔ should support files larger than 5MB if configured to
      ✔ can be modified to accept other content types
    Multipart form data parser
      32) should parse simple fields
      - should parse file attachments
      - should parse a mix of fields and file attachments
      33) should support large file attachments by default

  RequestValidator middleware
    ✔ all validations should pass if no other middleware is used
    ✔ all validations should pass if the API is valid
    ✔ all validations should pass if the request is outside of the API's basePath
    ✔ should throw an error if the API is invalid
    ✔ should clear the error if the API becomes valid
    ✔ should throw an HTTP 404 if the path is invalid
    ✔ should throw an HTTP 404 if the Paths object is empty
    ✔ should throw an HTTP 405 if the method is not allowed
    ✔ should throw an HTTP 405 if the Path Item objects are empty
    http500
      ✔ should throw an error if a parsing error occurs
    http401
      ✔ should NOT throw an HTTP 401 if no security is defined for the API
      ✔ should NOT throw an HTTP 401 if no security is defined for the operation
      ✔ should NOT throw an HTTP 401 if a Basic authentication requirement is met
      ✔ should NOT throw an HTTP 401 if an ApiKey authentication requirement is met (in header)
      ✔ should NOT throw an HTTP 401 if an ApiKey authentication requirement is met (in query)
      ✔ should NOT throw an HTTP 401 if any of the security requirements are fully met
      ✔ should throw an HTTP 401 if only some parts of a security requirements are met
      ✔ should throw an HTTP 401 if none of the security requirements are met
      ✔ should set the WWW-Authenticate header and realm using the Host header
      ✔ should set the WWW-Authenticate header and realm, even if the Host header is blank
    http406
      ✔ should NOT throw an HTTP 406 if no Accept header is present
      ✔ should NOT throw an HTTP 406 if no Accept header is blank
      ✔ should NOT throw an HTTP 406 if no "produces" MIME types are specified
      ✔ should NOT throw an HTTP 406 if the Accept header exactly matches the API's "produces"
      ✔ should NOT throw an HTTP 406 if the Accept header exactly matches the operation's "produces"
      ✔ should NOT throw an HTTP 406 if the Accept header matches one of the API's "produces"
      ✔ should NOT throw an HTTP 406 if the Accept header matches one of the operation's "produces"
      ✔ should throw an HTTP 406 if the Accept header does not match any of the API's "produces"
      ✔ should throw an HTTP 406 if the Accept header does not match any of the operation's "produces"
    http413
      ✔ should throw an HTTP 413 if body content is sent and not allowed
      ✔ should throw an HTTP 413 if a form field is sent and body content is not allowed
      ✔ should throw an HTTP 413 if a zero-byte file is sent and body content is not allowed
    http415
      ✔ should NOT throw an HTTP 415 if optional body params are not specified
      ✔ should NOT throw an HTTP 415 if no "consumes" MIME types are specified
      ✔ should NOT throw an HTTP 415 if the Content-Type exactly matches the API's "consumes"
      ✔ should NOT throw an HTTP 415 if the Content-Type exactly matches the operation's "consumes"
      ✔ should NOT throw an HTTP 415 if the Content-Type matches one of the API's "consumes"
      ✔ should NOT throw an HTTP 415 if the Content-Type matches one of the operation's "consumes"
      ✔ should throw an HTTP 415 if the Content-Type does not match any of the API's "consumes"
      ✔ should throw an HTTP 415 if the Content-Type does not match any of the operation's "consumes"

  Util methods
    util.warn
      ✔ should call console.warn if the WARN environment variable is not set
      ✔ should call console.warn if the WARN environment variable is not set to "off"
      ✔ should not call console.warn if the WARN environment variable is set to "off"
      ✔ can be called with just a message
      ✔ can be called with a message and params
      ✔ can be called with just an error
      ✔ can be called with an error and a message
      ✔ can be called with an error, a message, and params

  Validator - additional properties
    ✔ should delete all additional properties


  1159 passing (27s)
  39 pending
  33 failing

  1) FileServer middleware
       HEAD
         dereferenced JSON file
           should return an HTTP 500 if the Swagger API is invalid:
     Uncaught TypeError: Cannot read properties of null (reading '$refs')
      at fileServer (lib/file-server.js:25:55)
      at Middleware.files (lib/middleware.js:109:12)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/file-server.spec.js:272:55
      at /Users/andrewspencer/react/swagger-express-middleware/lib/middleware.js:65:11
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/call-me-maybe/src/maybe.js:11:28
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  2) FileServer middleware
       GET
         dereferenced JSON file
           should return an HTTP 500 if the Swagger API is invalid:
     Uncaught TypeError: Cannot read properties of null (reading '$refs')
      at fileServer (lib/file-server.js:25:55)
      at Middleware.files (lib/middleware.js:109:12)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/file-server.spec.js:272:55
      at /Users/andrewspencer/react/swagger-express-middleware/lib/middleware.js:65:11
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/call-me-maybe/src/maybe.js:11:28
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)

  3) JSON Schema - parse file params
       should parse an optional, unspecified file param:
     cannot POST /api/pets/fido/photos (500)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>TypeError: Cannot read properties of undefined (reading 'Photo')
    at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:59:64
    at Array.forEach (<anonymous>)
    at parseFormDataParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:53:18)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at parseSimpleParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:46:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at multerMiddleware (/Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:19:41)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at rawParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/raw.js:76:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/urlencoded.js:103:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at textParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/text.js:78:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at jsonParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/json.js:122:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at cookieParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/cookie-parser/index.js:57:14)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerSecurityMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:175:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerParamsMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:159:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerOperationMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:151:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerPathMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:75:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerApiMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:40:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:133:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at expressInit (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at query (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/middleware/query.js:45:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:175:3)
    at Function.handle (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/application.js:181:10)
    at Server.app (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/express.js:39:9)
    at Server.emit (node:events:519:28)
    at parserOnIncoming (node:_http_server:1140:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)</pre>
</body>
</html>

  Error: cannot POST /api/pets/fido/photos (500)<!DOCTYPE html>
  <html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Error</title>
  </head>
  <body>
  <pre>TypeError: Cannot read properties of undefined (reading 'Photo')
      at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:59:64
      at Array.forEach (<anonymous>)
      at parseFormDataParams (lib/param-parser.js:53:18)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:76:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at textParser (node_modules/body-parser/lib/types/text.js:78:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerSecurityMetadata (lib/request-metadata.js:175:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerParamsMetadata (lib/request-metadata.js:159:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerOperationMetadata (lib/request-metadata.js:151:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerPathMetadata (lib/request-metadata.js:75:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerApiMetadata (lib/request-metadata.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerMetadata (lib/request-metadata.js:133:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)
      at Server.emit (node:events:519:28)
      at parserOnIncoming (node:_http_server:1140:12)
      at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)</pre>
  </body>
  </html>
  
      at Test.<anonymous> (tests/fixtures/helper.js:121:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  4) JSON Schema - parse file params
       should parse the default File value if no value is specified:
     cannot POST /api/pets/fido/photos (500)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>TypeError: Cannot read properties of undefined (reading 'Photo')
    at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:59:64
    at Array.forEach (<anonymous>)
    at parseFormDataParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:53:18)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at parseSimpleParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:46:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at multerMiddleware (/Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:19:41)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at rawParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/raw.js:76:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/urlencoded.js:103:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at textParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/text.js:78:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at jsonParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/json.js:122:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at cookieParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/cookie-parser/index.js:57:14)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerSecurityMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:175:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerParamsMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:159:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerOperationMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:151:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerPathMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:75:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerApiMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:40:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at swaggerMetadata (/Users/andrewspencer/react/swagger-express-middleware/lib/request-metadata.js:133:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at expressInit (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/middleware/init.js:40:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at query (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/middleware/query.js:45:5)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:175:3)
    at Function.handle (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/application.js:181:10)
    at Server.app (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/express.js:39:9)
    at Server.emit (node:events:519:28)
    at parserOnIncoming (node:_http_server:1140:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)</pre>
</body>
</html>

  Error: cannot POST /api/pets/fido/photos (500)<!DOCTYPE html>
  <html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Error</title>
  </head>
  <body>
  <pre>TypeError: Cannot read properties of undefined (reading 'Photo')
      at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:59:64
      at Array.forEach (<anonymous>)
      at parseFormDataParams (lib/param-parser.js:53:18)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:76:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at textParser (node_modules/body-parser/lib/types/text.js:78:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerSecurityMetadata (lib/request-metadata.js:175:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerParamsMetadata (lib/request-metadata.js:159:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerOperationMetadata (lib/request-metadata.js:151:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerPathMetadata (lib/request-metadata.js:75:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerApiMetadata (lib/request-metadata.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerMetadata (lib/request-metadata.js:133:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)
      at Server.emit (node:events:519:28)
      at parserOnIncoming (node:_http_server:1140:12)
      at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)</pre>
  </body>
  </html>
  
      at Test.<anonymous> (tests/fixtures/helper.js:121:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  5) JSON Schema - parse file params
       should throw an error if required and not specified:
     AssertionError: expected undefined to equal 400
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/json-schema/parse/parse-file.spec.js:204:33
      at tryCatch (tests/fixtures/helper.js:87:9)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/fixtures/helper.js:74:7
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:97:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:76:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at textParser (node_modules/body-parser/lib/types/text.js:78:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerSecurityMetadata (lib/request-metadata.js:175:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerParamsMetadata (lib/request-metadata.js:159:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerOperationMetadata (lib/request-metadata.js:151:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerPathMetadata (lib/request-metadata.js:75:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerApiMetadata (lib/request-metadata.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerMetadata (lib/request-metadata.js:133:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)
      at Server.emit (node:events:519:28)
      at parserOnIncoming (node:_http_server:1140:12)
      at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)

  6) JSON Schema - parse file params
       should throw an error if the value is not a file:
     AssertionError: expected undefined to equal 400
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/json-schema/parse/parse-file.spec.js:225:33
      at tryCatch (tests/fixtures/helper.js:87:9)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/fixtures/helper.js:74:7
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:97:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:76:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:103:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at textParser (node_modules/body-parser/lib/types/text.js:78:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at cookieParser (node_modules/cookie-parser/index.js:57:14)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerSecurityMetadata (lib/request-metadata.js:175:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerParamsMetadata (lib/request-metadata.js:159:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerOperationMetadata (lib/request-metadata.js:151:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerPathMetadata (lib/request-metadata.js:75:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerApiMetadata (lib/request-metadata.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at swaggerMetadata (lib/request-metadata.js:133:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at Function.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)
      at Server.emit (node:events:519:28)
      at parserOnIncoming (node:_http_server:1140:12)
      at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)

  7) JSON Schema - parse object params
       should throw an error if the value is blank:
     Error: cannot PATCH /api/pets/fido (404)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot PATCH /api/pets/fido</pre>
</body>
</html>

      at Test.<anonymous> (tests/fixtures/helper.js:121:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  8) Query Collection Mock
       DELETE
         different data types
           should delete multipart/form-data:

      Uncaught AssertionError: expected [ { Label: 'Photo 1', …(3) } ] to deeply equal [ { ID: 523316828, …(3) } ]
      + expected - actual

           "ID": 523316828
           "Label": "Photo 1"
           "Photo": {
             "buffer": [null]
      -      "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1kj6sgjp6esX"
             "encoding": "7bit"
             "extension": "jpg"
             "fieldname": "Photo"
      -      "filename": "1MB.jpg"
             "mimetype": "image/jpeg"
             "name": "1MB.jpg"
             "originalname": "1MB.jpg"
             "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1kj6sgjp6esX/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/delete-collection.spec.js:577:47
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  9) Query Collection Mock
       DELETE
         different data types
           should delete a file:

      Uncaught AssertionError: expected [ { fieldname: 'Photo', …(11) } ] to deeply equal [ { fieldname: 'Photo', …(9) } ]
      + expected - actual

       [
         {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1DfvG5PlmsWT"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1DfvG5PlmsWT/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/delete-collection.spec.js:636:47
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  10) Query Collection Mock
       DELETE
         different data types
           should delete a file attachment:

      Uncaught AssertionError: expected [ { fieldname: 'Photo', …(11) } ] to deeply equal [ { fieldname: 'Photo', …(9) } ]
      + expected - actual

       [
         {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-jg3pyko3zEPl"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-jg3pyko3zEPl/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/delete-collection.spec.js:699:47
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  11) Edit Resource Mock
       DELETE
         different data types
           should return multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(3) } to deeply equal { ID: 1158925221, …(3) }
      + expected - actual

         "ID": 1158925221
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-JVt7vKJ2QXTx"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-JVt7vKJ2QXTx/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/delete-resource.spec.js:521:47
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  12) Edit Collection Mock
       PATCH
         Determining resource names (by data type)
           should support undefined values:

      Error: expected '' response body, got '""'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:564:18
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/helper.js:66:5
      at /Users/andrewspencer/react/swagger-express-middleware/lib/middleware.js:83:11
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/call-me-maybe/src/maybe.js:9:28
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)
  ----
      at error (node_modules/supertest/lib/test.js:392:15)
      at Test._assertBody (node_modules/supertest/lib/test.js:263:16)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  13) Edit Collection Mock
       PATCH
         Determining resource names (by data type)
           should support multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(3) } to deeply equal { ID: 1731877733, …(3) }
      + expected - actual

         "ID": 1731877733
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-UQtX6Eslr1mC"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-UQtX6Eslr1mC/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:585:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  14) Edit Collection Mock
       PATCH
         Determining resource names (by file name)
           should use the server-side file name as the resource name:

      Uncaught AssertionError: expected '/api/pets/Fido/photos/1MB.jpg' to not equal '/api/pets/Fido/photos/1MB.jpg'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:978:55
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  15) Edit Collection Mock
       PATCH
         Determining resource names (by file name)
           should use an auto-generated resource name if the body is empty:
     cannot PATCH /api/pets/Fido/photos (500)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>TypeError: Cannot create property 'Label' on string ''
    at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
    at Array.forEach (<anonymous>)
    at parseFormDataParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:53:18)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at parseSimpleParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:46:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at multerMiddleware (/Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:19:41)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at rawParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/raw.js:58:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/urlencoded.js:85:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at invokeCallback (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:238:16)
    at done (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:519:28)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
</body>
</html>

  Error: cannot PATCH /api/pets/Fido/photos (500)<!DOCTYPE html>
  <html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Error</title>
  </head>
  <body>
  <pre>TypeError: Cannot create property 'Label' on string ''
      at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
      at Array.forEach (<anonymous>)
      at parseFormDataParams (lib/param-parser.js:53:18)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:58:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
      at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)
      at IncomingMessage.emit (node:events:519:28)
      at endReadableNT (node:internal/streams/readable:1696:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
  </body>
  </html>
  
      at Test.<anonymous> (tests/fixtures/helper.js:146:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  16) Edit Collection Mock
       PUT
         Determining resource names (by data type)
           should support undefined values:

      Error: expected '' response body, got '""'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:564:18
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/helper.js:66:5
      at /Users/andrewspencer/react/swagger-express-middleware/lib/middleware.js:83:11
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/call-me-maybe/src/maybe.js:9:28
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)
  ----
      at error (node_modules/supertest/lib/test.js:392:15)
      at Test._assertBody (node_modules/supertest/lib/test.js:263:16)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  17) Edit Collection Mock
       PUT
         Determining resource names (by data type)
           should support multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(3) } to deeply equal { ID: 1755861460, …(3) }
      + expected - actual

         "ID": 1755861460
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-rubx3rIKA13m"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-rubx3rIKA13m/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:585:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  18) Edit Collection Mock
       PUT
         Determining resource names (by file name)
           should use the server-side file name as the resource name:

      Uncaught AssertionError: expected '/api/pets/Fido/photos/1MB.jpg' to not equal '/api/pets/Fido/photos/1MB.jpg'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:978:55
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  19) Edit Collection Mock
       PUT
         Determining resource names (by file name)
           should use an auto-generated resource name if the body is empty:
     cannot PUT /api/pets/Fido/photos (500)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>TypeError: Cannot create property 'Label' on string ''
    at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
    at Array.forEach (<anonymous>)
    at parseFormDataParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:53:18)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at parseSimpleParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:46:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at multerMiddleware (/Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:19:41)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at rawParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/raw.js:58:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/urlencoded.js:85:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at invokeCallback (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:238:16)
    at done (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:519:28)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
</body>
</html>

  Error: cannot PUT /api/pets/Fido/photos (500)<!DOCTYPE html>
  <html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Error</title>
  </head>
  <body>
  <pre>TypeError: Cannot create property 'Label' on string ''
      at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
      at Array.forEach (<anonymous>)
      at parseFormDataParams (lib/param-parser.js:53:18)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:58:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
      at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)
      at IncomingMessage.emit (node:events:519:28)
      at endReadableNT (node:internal/streams/readable:1696:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
  </body>
  </html>
  
      at Test.<anonymous> (tests/fixtures/helper.js:146:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  20) Edit Collection Mock
       POST
         Determining resource names (by data type)
           should support undefined values:

      Error: expected '' response body, got '""'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:564:18
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/helper.js:66:5
      at /Users/andrewspencer/react/swagger-express-middleware/lib/middleware.js:83:11
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/call-me-maybe/src/maybe.js:9:28
      at process.processTicksAndRejections (node:internal/process/task_queues:77:11)
  ----
      at error (node_modules/supertest/lib/test.js:392:15)
      at Test._assertBody (node_modules/supertest/lib/test.js:263:16)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  21) Edit Collection Mock
       POST
         Determining resource names (by data type)
           should support multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(3) } to deeply equal { ID: 1030736237, …(3) }
      + expected - actual

         "ID": 1030736237
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-rUAMF4xilp3L"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-rUAMF4xilp3L/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:585:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  22) Edit Collection Mock
       POST
         Determining resource names (by file name)
           should use the server-side file name as the resource name:

      Uncaught AssertionError: expected '/api/pets/Fido/photos/1MB.jpg' to not equal '/api/pets/Fido/photos/1MB.jpg'
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-collection.spec.js:978:55
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  23) Edit Collection Mock
       POST
         Determining resource names (by file name)
           should use an auto-generated resource name if the body is empty:
     cannot POST /api/pets/Fido/photos (500)<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>TypeError: Cannot create property 'Label' on string ''
    at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
    at Array.forEach (<anonymous>)
    at parseFormDataParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:53:18)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at parseSimpleParams (/Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:46:3)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at multerMiddleware (/Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:19:41)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at rawParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/raw.js:58:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/types/urlencoded.js:85:7)
    at Layer.handle [as handle_request] (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:328:13)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:280:10)
    at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at invokeCallback (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:238:16)
    at done (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/Users/andrewspencer/react/swagger-express-middleware/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:519:28)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
</body>
</html>

  Error: cannot POST /api/pets/Fido/photos (500)<!DOCTYPE html>
  <html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Error</title>
  </head>
  <body>
  <pre>TypeError: Cannot create property 'Label' on string ''
      at /Users/andrewspencer/react/swagger-express-middleware/lib/param-parser.js:63:30
      at Array.forEach (<anonymous>)
      at parseFormDataParams (lib/param-parser.js:53:18)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at rawParser (node_modules/body-parser/lib/types/raw.js:58:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:85:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/body-parser/lib/read.js:137:5
      at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)
      at IncomingMessage.emit (node:events:519:28)
      at endReadableNT (node:internal/streams/readable:1696:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)</pre>
  </body>
  </html>
  
      at Test.<anonymous> (tests/fixtures/helper.js:146:23)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  24) Edit Resource Mock
       PUT
         Data type tests
           should return multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(2) } to deeply equal { Label: 'Photo 1', …(2) }
      + expected - actual

         "Description": "A photo of Fido"
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-GUmV3V3xr0uM"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-GUmV3V3xr0uM/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-resource.spec.js:479:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  25) Edit Resource Mock
       PATCH
         Data type tests
           should return multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(2) } to deeply equal { Label: 'Photo 1', …(2) }
      + expected - actual

         "Description": "A photo of Fido"
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-WSVjwQdh540k"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-WSVjwQdh540k/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-resource.spec.js:479:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  26) Edit Resource Mock
       POST
         Data type tests
           should return multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(2) } to deeply equal { Label: 'Photo 1', …(2) }
      + expected - actual

         "Description": "A photo of Fido"
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-vFgXS3bx07Ys"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-vFgXS3bx07Ys/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/edit-resource.spec.js:479:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  27) Query Collection Mock
       application/json
         GET
           different data types
             should return multipart/form-data:

      Uncaught AssertionError: expected [ { Label: 'Photo 1', …(3) } ] to deeply equal [ { ID: 364643335, …(3) } ]
      + expected - actual

           "ID": 364643335
           "Label": "Photo 1"
           "Photo": {
             "buffer": [null]
      -      "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-ld3gEUFax3cw"
             "encoding": "7bit"
             "extension": "jpg"
             "fieldname": "Photo"
      -      "filename": "1MB.jpg"
             "mimetype": "image/jpeg"
             "name": "1MB.jpg"
             "originalname": "1MB.jpg"
             "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-ld3gEUFax3cw/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/query-collection.spec.js:553:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  28) Query Collection Mock
       application/json
         GET
           different data types
             should return a file:

      Uncaught AssertionError: expected [ { fieldname: 'Photo', …(11) } ] to deeply equal [ { fieldname: 'Photo', …(9) } ]
      + expected - actual

       [
         {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-oIkoG4RMVM5n"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-oIkoG4RMVM5n/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/query-collection.spec.js:608:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  29) Query Collection Mock
       application/json
         GET
           different data types
             should return a file attachment:

      Uncaught AssertionError: expected [ { fieldname: 'Photo', …(11) } ] to deeply equal [ { fieldname: 'Photo', …(9) } ]
      + expected - actual

       [
         {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-dhaFjmM3IFhT"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-dhaFjmM3IFhT/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/query-collection.spec.js:663:44
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  30) Query Resource Mock
       GET
         different data types
           should return multipart/form-data:

      Uncaught AssertionError: expected { Label: 'Photo 1', …(3) } to deeply equal { ID: 2800371, Label: 'Photo 1', …(2) }
      + expected - actual

         "ID": 2800371
         "Label": "Photo 1"
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1WTCZHNBXVBt"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-1WTCZHNBXVBt/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/mock/query-resource.spec.js:499:49
      at Test.<anonymous> (tests/fixtures/helper.js:159:9)
      at Test.assert (node_modules/supertest/lib/test.js:204:10)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)
      at Object.onceWrapper (node:events:633:28)
      at Server.emit (node:events:519:28)
      at emitCloseNT (node:net:2321:8)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  31) ParamParser middleware
       Form Data param parser
         should parse file params:

      AssertionError: expected { Object (Photo) } to deeply equal { Photo: { buffer: null, …(9) } }
      + expected - actual

       {
         "Photo": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-yb6ZocXEZ4V3"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "Photo"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-yb6ZocXEZ4V3/1MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/param-parser.spec.js:536:39
      at tryCatch (tests/fixtures/helper.js:90:9)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/fixtures/helper.js:79:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:284:15
      at param (node_modules/express/lib/router/index.js:365:14)
      at param (node_modules/express/lib/router/index.js:376:14)
      at Function.process_params (node_modules/express/lib/router/index.js:421:3)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parsePathParams (lib/path-parser.js:144:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseBodyParam (lib/param-parser.js:111:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseFormDataParams (lib/param-parser.js:68:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at done (node_modules/multer/lib/make-middleware.js:59:7)
      at indicateDone (node_modules/multer/lib/make-middleware.js:63:68)
      at Multipart.<anonymous> (node_modules/multer/lib/make-middleware.js:187:7)
      at Multipart.emit (node:events:519:28)
      at emitCloseNT (node:internal/streams/destroy:147:10)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  32) RequestParser middleware
       Multipart form data parser
         should parse simple fields:

      AssertionError: expected { foo: 'bar', …(3) } to deeply equal { foo: 'bar', …(3) }
      + expected - actual


      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/request-parser.spec.js:742:38
      at tryCatch (tests/fixtures/helper.js:90:9)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/fixtures/helper.js:79:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parsePathParams (lib/path-parser.js:144:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseBodyParam (lib/param-parser.js:111:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseFormDataParams (lib/param-parser.js:68:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at done (node_modules/multer/lib/make-middleware.js:59:7)
      at indicateDone (node_modules/multer/lib/make-middleware.js:63:68)
      at Multipart.<anonymous> (node_modules/multer/lib/make-middleware.js:187:7)
      at Multipart.emit (node:events:519:28)
      at emitCloseNT (node:internal/streams/destroy:147:10)
      at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

  33) RequestParser middleware
       Multipart form data parser
         should support large file attachments by default:

      AssertionError: expected { file1: { …(12) }, …(2) } to deeply equal { file1: { buffer: null, …(9) }, …(2) }
      + expected - actual

       {
         "file1": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-Mt5KWgCnWAdZ"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "file1"
      -    "filename": "1MB.jpg"
           "mimetype": "image/jpeg"
           "name": "1MB.jpg"
           "originalname": "1MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-Mt5KWgCnWAdZ/1MB.jpg"
--
           "truncated": false
         }
         "file2": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-etAkwlzumamH"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "file2"
      -    "filename": "5MB.jpg"
           "mimetype": "image/jpeg"
           "name": "5MB.jpg"
           "originalname": "5MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-etAkwlzumamH/5MB.jpg"
--
           "truncated": false
         }
         "file3": {
           "buffer": [null]
      -    "destination": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-vp9Gg2TULdzh"
           "encoding": "7bit"
           "extension": "jpg"
           "fieldname": "file3"
      -    "filename": "6MB.jpg"
           "mimetype": "image/jpeg"
           "name": "6MB.jpg"
           "originalname": "6MB.jpg"
           "path": "/private/var/folders/6r/ht8xz_gn027c8gqdj6fbcd4m0000gn/T/swagger-express-middleware--18621-vp9Gg2TULdzh/6MB.jpg"
      
      at /Users/andrewspencer/react/swagger-express-middleware/tests/specs/request-parser.spec.js:878:39
      at tryCatch (tests/fixtures/helper.js:90:9)
      at /Users/andrewspencer/react/swagger-express-middleware/tests/fixtures/helper.js:79:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parsePathParams (lib/path-parser.js:144:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseBodyParam (lib/param-parser.js:111:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseFormDataParams (lib/param-parser.js:68:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at parseSimpleParams (lib/param-parser.js:46:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at /Users/andrewspencer/react/swagger-express-middleware/lib/request-parser.js:67:7
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at done (node_modules/multer/lib/make-middleware.js:59:7)
      at indicateDone (node_modules/multer/lib/make-middleware.js:63:68)
      at /Users/andrewspencer/react/swagger-express-middleware/node_modules/multer/lib/make-middleware.js:176:11
      at WriteStream.<anonymous> (node_modules/multer/storage/disk.js:43:9)
      at WriteStream.emit (node:events:531:35)
      at finish (node:internal/streams/writable:946:10)
      at node:internal/streams/writable:927:13
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)



-----------------------|---------|----------|---------|---------|-------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s       
-----------------------|---------|----------|---------|---------|-------------------------
All files              |   98.57 |    97.77 |   98.21 |   98.57 |                         
 lib                   |    98.9 |    97.08 |     100 |    98.9 |                         
  context.js           |     100 |      100 |     100 |     100 |                         
  cors.js              |     100 |      100 |     100 |     100 |                         
  file-server.js       |   97.83 |    97.22 |     100 |   97.83 | 47-50                   
  index.js             |     100 |      100 |     100 |     100 |                         
  middleware.js        |   98.98 |    93.54 |     100 |   98.98 | 73-74                   
  param-parser.js      |   96.27 |     92.1 |     100 |   96.27 | 83-85,129-131           
  path-parser.js       |     100 |      100 |     100 |     100 |                         
  request-metadata.js  |     100 |      100 |     100 |     100 |                         
  request-parser.js    |   96.98 |       80 |     100 |   96.98 | 59-63                   
  request-validator.js |     100 |      100 |     100 |     100 |                         
  validator.js         |     100 |      100 |     100 |     100 |                         
 lib/data-store        |   99.13 |    99.31 |   91.17 |   99.13 |                         
  buffer-polyfill.js   |   36.36 |       50 |       0 |   36.36 | 5-11                    
  file-data-store.js   |     100 |      100 |     100 |     100 |                         
  index.js             |     100 |      100 |   86.66 |     100 |                         
  memory-data-store.js |     100 |      100 |     100 |     100 |                         
  resource.js          |     100 |      100 |     100 |     100 |                         
 lib/helpers           |   96.59 |    96.28 |     100 |   96.59 |                         
  json-schema.js       |   95.55 |    95.79 |     100 |   95.55 | 562-563,644-658,661-675 
  util.js              |    99.6 |    98.18 |     100 |    99.6 | 213                     
 lib/mock              |   99.26 |     99.2 |     100 |   99.26 |                         
  edit-collection.js   |   99.16 |    98.33 |     100 |   99.16 | 235-237                 
  edit-resource.js     |     100 |      100 |     100 |     100 |                         
  index.js             |   98.01 |    98.82 |     100 |   98.01 | 278-284                 
  query-collection.js  |     100 |      100 |     100 |     100 |                         
  query-resource.js    |     100 |      100 |     100 |     100 |                         
  semantic-request.js  |     100 |      100 |     100 |     100 |                         
  semantic-response.js |     100 |      100 |     100 |     100 |                         
-----------------------|---------|----------|---------|---------|-------------------------
